# CTF注入语法自动提示与自动化测试工具

## 项目介绍

这是一个用于CTF比赛中SQL注入测试的工具，提供了自动化的注入点检测、注入语法生成和详细的注入建议。该工具通过本地代理服务器绕过浏览器的CORS限制，实现跨域请求测试。

## 环境要求

- Node.js 12+（用于运行本地代理服务器）
- 现代浏览器（Chrome、Firefox、Edge等）

## 目录结构

```
.
├── css/              # 样式文件
│   ├── bootstrap.min.css
│   └── font-awesome.min.css
├── fonts/            # 字体文件
│   ├── fontawesome-webfont.ttf
│   ├── fontawesome-webfont.woff
│   └── fontawesome-webfont.woff2
├── js/               # JavaScript文件
│   └── bootstrap.bundle.min.js
├── index.html        # 主页面
├── proxy.js          # 本地代理服务器
├── script.js         # 核心功能脚本
└── styles.css        # 自定义样式
```

## 使用步骤

### 1. 启动本地代理服务器

**这是必须的第一步！**

打开命令行终端，进入项目目录，执行以下命令启动本地代理服务器：

```bash
node proxy.js
```

成功启动后，终端将显示：

```
Proxy server running at http://localhost:3000
Usage: http://localhost:3000?url=YOUR_TARGET_URL
```

### 2. 运行网页

在浏览器中打开 `index.html` 文件，即可开始使用工具。

**注意：** 必须先启动代理服务器，否则工具将无法正常工作，并会显示错误提示。

## 功能说明

### 1. 输入配置

- **目标URL**：输入要测试的目标URL，例如 `http://example.com/vulnerable.php`
- **参数列表**：
  - 自动解析URL中的参数，或手动添加测试参数
  - 支持多个参数的同时测试
- **测试选项**：
  - **注入类型**：选择要测试的注入类型（可多选）
    - 数字型注入
    - 字符型注入（单引号/双引号）
    - 括号型注入
    - 布尔盲注
    - 时间盲注
    - 报错注入
    - 堆叠注入
  - **测试深度**：
    - 简单测试：基础注入点检测
    - 中等测试：完整注入类型检测
    - 高级测试：深度注入利用测试
  - **并发数**：设置同时发送的请求数量（1-10）
  - **超时时间**：设置请求超时时间（1-30秒）

### 2. 自动化测试

点击「开始自动化测试」按钮，工具将：

1. 根据选择的注入类型和测试深度生成测试用例
2. 通过本地代理服务器发送请求，绕过CORS限制
3. 分析响应结果，检测注入点
4. 实时显示测试结果和统计信息
5. 生成详细的注入建议

### 3. 测试结果

- **测试统计**：显示总测试数、注入点发现数、可疑注入点数和测试错误数
- **进度条**：实时显示测试进度
- **结果列表**：详细列出每个测试用例的结果，包括：
  - URL
  - 参数
  - 注入类型
  - 状态码
  - 响应时间
  - 测试结果
  - 风险等级
  - 操作按钮（查看详情、复制URL）

### 4. 注入语法生成

点击「仅生成注入语法」按钮，工具将生成各种类型的注入语法，包括：

- 基本检测语法
- UNION注入语法
- 报错注入语法
- 布尔盲注语法
- 时间盲注语法
- 堆叠注入语法

每个语法项都包含：
- 语法名称
- 完整测试URL
- 语法描述
- 操作按钮（复制完整URL、复制Payload、在新标签页打开）

### 5. 注入建议

测试完成后，工具将根据测试结果生成针对性的注入建议，包括：

- 注入利用步骤与示例
- 实用技巧
- SQL注入防护建议

## 代理服务器说明

本地代理服务器 `proxy.js` 的主要作用是：

1. 绕过浏览器的CORS（跨域资源共享）限制
2. 转发请求到目标服务器
3. 添加必要的CORS头，允许浏览器接收响应
4. 支持HTTP和HTTPS目标URL
5. 允许自签名证书

## 常见问题

### Q: 为什么必须启动本地代理服务器？
A: 现代浏览器有严格的CORS策略，直接从本地文件运行的网页无法向其他域名发送AJAX请求。本地代理服务器作为中间层，绕过了这一限制。

### Q: 如何判断代理服务器是否正常运行？
A: 启动代理服务器后，终端会显示服务器运行信息。网页顶部会显示代理服务器的状态：
- ✅ 代理服务器运行正常
- ❌ 代理服务器未运行，请先执行 `node proxy.js`

### Q: 测试时出现"CORS跨域限制"错误怎么办？
A: 请确保本地代理服务器已正确启动。如果问题仍然存在，可能是目标服务器的CORS策略过于严格，建议使用「仅生成注入语法」功能，直接在浏览器中访问生成的URL。

### Q: 测试时出现"连接被重置"错误怎么办？
A: 这通常是因为服务器对频繁的请求进行防护。建议降低并发数、增加超时时间，或使用「仅生成注入语法」功能手动测试。

## 浏览器兼容性

- Chrome 80+
- Firefox 75+
- Edge 80+
- Safari 13+

## 注意事项

1. 该工具仅用于合法的CTF比赛和授权的安全测试
2. 请勿用于未授权的网站测试，否则后果自负
3. 对于CTF题目，重点关注工具生成的注入语法，而不是自动化测试结果
4. 工具的测试结果仅供参考，最终需要手动验证
5. 定期更新工具，以获取最新的注入检测规则

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

